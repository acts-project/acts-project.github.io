<!-- HTML header for doxygen 1.12.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ACTS: Physics Monitoring in CI</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script>
MathJax = {
  tex: {
    inlineMath: {'[+]': [['$', '$']]}
  },
};
</script>
<script id="MathJax-script" async
          src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js">
</script>
<!-- <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
 -->
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="acts_logo_colored.svg"/></td>
  <td id="projectalign">
   <div id="projectname">ACTS
   </div>
   <div id="projectbrief">Experiment-independent tracking</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('physmon.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Physics Monitoring in CI </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Monitoring physics performance in the ACTS CI.</p>
<p>The ACTS CI runs a suite of physics performance monitoring jobs dubbed <em>physmon</em>. The purpose is to monitor and detect changes in the physics performance, both intentional and accidental.</p>
<p>The associated job will run a number of workflow combinations. Currently, this includes the truth tracking and OpenDataDetector <em>full chain</em> workflows. The latter is further split into configurations with full seeding, truth smeared or truth estimated seeds. These jobs produce performance output files.</p>
<p>These performance output files are then evaluated using the programs dubbed [](analysis_apps). After this step, the job will then run comparisons of the diagnostics histograms created by these programs. If the comparisons indicate that the histogram contents changed meaningfully, the job will fail and report this on a pull request.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md36"></a>
How do I investigate a physmon failure?</h2>
<p>The physmon CI job attaches its results as an artifact to the CI run (also for successful runs) From your pull request, you need to click on the <em>Checks</em> tab at the top:</p>
<div class="image">
<img src="physmon_checks.png" alt=""/>
<div class="caption">
Checks button on GitHub</div></div>
    <p>From there, click on the <em>Builds</em> workflow on the left:</p>
<div class="image">
<img src="physmon_run.png" alt=""/>
<div class="caption">
Builds runs the physmon job</div></div>
    <p>On the workflow overview, scroll down to find the attached artifacts, and locate the <em>physmon</em> artifact. You can click to download it:</p>
<div class="image">
<img src="physmon_artifact.png" alt="" width="100%"/>
<div class="caption">
physmon artifact</div></div>
    <dl class="section note"><dt>Note</dt><dd>GitHub Actions artifacts are deleted after a fixed amount of time. If the CI completed a while ago, it is possible this report is no longer available.</dd></dl>
<p>After the download, you need to unzip the archive, whose contents will look similar to this:</p>
<div class="fragment"><div class="line">acts_analysis_residuals_and_pulls.root</div>
<div class="line">ckf_seeded.html</div>
<div class="line">ckf_seeded_plots</div>
<div class="line">ckf_truth_estimated.html</div>
<div class="line">ckf_truth_estimated_plots</div>
<div class="line">ckf_truth_smeared.html</div>
<div class="line">ckf_truth_smeared_plots</div>
<div class="line">ivf_seeded.html</div>
<div class="line">ivf_seeded_plots</div>
<div class="line">ivf_truth_estimated.html</div>
<div class="line">ivf_truth_estimated_plots</div>
<div class="line">ivf_truth_smeared.html</div>
<div class="line">ivf_truth_smeared_plots</div>
<div class="line">performance_ckf_seeded.root</div>
<div class="line">performance_ckf_truth_estimated.root</div>
<div class="line">performance_ckf_truth_smeared.root</div>
<div class="line">performance_truth_tracking.root</div>
<div class="line">performance_vertexing_seeded.root</div>
<div class="line">performance_vertexing_seeded_hist.root</div>
<div class="line">performance_vertexing_truth_estimated.root</div>
<div class="line">performance_vertexing_truth_estimated_hist.root</div>
<div class="line">performance_vertexing_truth_smeared.root</div>
<div class="line">performance_vertexing_truth_smeared_hist.root</div>
<div class="line">run.log</div>
<div class="line">truth_tracking.html</div>
<div class="line">truth_tracking_plots</div>
</div><!-- fragment --><p>The <span class="tt">.root</span> files are the performance output files and corresponding histogram files. The physmon job log file is also available. Finally, the <span class="tt">_plots</span> folder contain plots of all the histogram comparisons, and the <span class="tt">.html</span> files contain single-file reports showing the detailed results. An example of an HTML report looks like this:</p>
<div class="image">
<img src="physmon_report.png" alt="" width="100%"/>
<div class="caption">
Physmon report</div></div>
    <p>If you get a physmon job failure on your pull request, please investigate the failing report(s), and try to understand if the change causing the discrepancies is expected.</p>
<p>In case the conclusion is that the changes are indeed expected, the reference files used to generate the comparisons are located in <span class="tt">CI/physmon/reference/</span>, and can be updated to the output files found in the artifact zip archive. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
