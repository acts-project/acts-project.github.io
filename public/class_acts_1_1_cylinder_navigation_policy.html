<!-- HTML header for doxygen 1.12.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ACTS: Acts::CylinderNavigationPolicy Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script>
MathJax = {
  tex: {
    inlineMath: {'[+]': [['$', '$']]}
  },
};
</script>
<script id="MathJax-script" async
          src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js">
</script>
<!-- <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
 -->
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="acts_logo_colored.svg"/></td>
  <td id="projectalign">
   <div id="projectname">ACTS
   </div>
   <div id="projectbrief">Experiment-independent tracking</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('class_acts_1_1_cylinder_navigation_policy.html','','class_acts_1_1_cylinder_navigation_policy-members'); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Acts::CylinderNavigationPolicy Class Reference<span class="mlabels"><span class="mlabel final">final</span></span></div></div>
</div><!--header-->
<div class="contents">

<p>Optimized navigation policy for cylindrical volumes that intelligently selects which portals to add as candidates based on geometric analysis.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_cylinder_navigation_policy_8hpp_source.html">Acts/Navigation/CylinderNavigationPolicy.hpp</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Acts::CylinderNavigationPolicy:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" loading="lazy" frameborder="0" src="class_acts_1_1_cylinder_navigation_policy__inherit__graph.svg" width="194" height="124"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<div class="dynheader">
Collaboration diagram for Acts::CylinderNavigationPolicy:</div>
<div class="dyncontent">
<div class="center"><iframe scrolling="no" loading="lazy" frameborder="0" src="class_acts_1_1_cylinder_navigation_policy__coll__graph.svg" width="194" height="124"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-pub-methods" class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a7b73eff8aac730549ddc2cc25a0c0c82" id="r_a7b73eff8aac730549ddc2cc25a0c0c82"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7b73eff8aac730549ddc2cc25a0c0c82">CylinderNavigationPolicy</a> (const <a class="el" href="class_acts_1_1_geometry_context.html">GeometryContext</a> &amp;gctx, const <a class="el" href="class_acts_1_1_tracking_volume.html">TrackingVolume</a> &amp;volume, const <a class="el" href="class_acts_1_1_logger.html">Logger</a> &amp;logger)</td></tr>
<tr class="memdesc:a7b73eff8aac730549ddc2cc25a0c0c82"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor from a volume.  <br /></td></tr>
<tr class="memitem:ad8265669622a577a9dd6b84c2559b0d9" id="r_ad8265669622a577a9dd6b84c2559b0d9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad8265669622a577a9dd6b84c2559b0d9">connect</a> (<a class="el" href="namespace_acts.html#a3c7053506015dae00ae1b4273764fb86">NavigationDelegate</a> &amp;delegate) const override</td></tr>
<tr class="memdesc:ad8265669622a577a9dd6b84c2559b0d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Connect the policy to a navigation delegate.  <br /></td></tr>
<tr class="memitem:a4e7849281f8e4aecded40f5746353dd8" id="r_a4e7849281f8e4aecded40f5746353dd8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4e7849281f8e4aecded40f5746353dd8">initializeCandidates</a> (const <a class="el" href="class_acts_1_1_geometry_context.html">GeometryContext</a> &amp;gctx, const <a class="el" href="struct_acts_1_1_navigation_arguments.html">NavigationArguments</a> &amp;args, <a class="el" href="class_acts_1_1_append_only_navigation_stream.html">AppendOnlyNavigationStream</a> &amp;stream, const <a class="el" href="class_acts_1_1_logger.html">Logger</a> &amp;logger) const</td></tr>
<tr class="memdesc:a4e7849281f8e4aecded40f5746353dd8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Intelligently select and add portal candidates based on geometric analysis.  <br /></td></tr>
<tr class="inherit_header pub_methods_class_acts_1_1_i_navigation_policy"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_methods_class_acts_1_1_i_navigation_policy')"><span class="dynarrow"><span class="arrowhead closed"></span></span>Public Member Functions inherited from <a class="el" href="class_acts_1_1_i_navigation_policy.html">Acts::INavigationPolicy</a></td></tr>
<tr class="memitem:a4a5cc5d6ccf2d634e70160e6da727a77 inherit pub_methods_class_acts_1_1_i_navigation_policy" id="r_a4a5cc5d6ccf2d634e70160e6da727a77"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_acts_1_1_i_navigation_policy.html#a4a5cc5d6ccf2d634e70160e6da727a77">~INavigationPolicy</a> ()=default</td></tr>
<tr class="memdesc:a4a5cc5d6ccf2d634e70160e6da727a77 inherit pub_methods_class_acts_1_1_i_navigation_policy"><td class="mdescLeft">&#160;</td><td class="mdescRight">Virtual destructor so policies can be held through this base class.  <br /></td></tr>
<tr class="memitem:add716fb1168fb2f552380b5051df5bc8 inherit pub_methods_class_acts_1_1_i_navigation_policy" id="r_add716fb1168fb2f552380b5051df5bc8"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_acts_1_1_i_navigation_policy.html#add716fb1168fb2f552380b5051df5bc8">visit</a> (const std::function&lt; void(const <a class="el" href="class_acts_1_1_i_navigation_policy.html">INavigationPolicy</a> &amp;)&gt; &amp;visitor) const</td></tr>
<tr class="memdesc:add716fb1168fb2f552380b5051df5bc8 inherit pub_methods_class_acts_1_1_i_navigation_policy"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convenience function to walk over all navigation policies.  <br /></td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-inherited" class="groupheader"><a id="inherited" name="inherited"></a>
Additional Inherited Members</h2></td></tr>
<tr class="inherit_header pub_static_methods_class_acts_1_1_i_navigation_policy"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pub_static_methods_class_acts_1_1_i_navigation_policy')"><span class="dynarrow"><span class="arrowhead closed"></span></span>Static Public Member Functions inherited from <a class="el" href="class_acts_1_1_i_navigation_policy.html">Acts::INavigationPolicy</a></td></tr>
<tr class="memitem:ad6925e631f0576db80fb178edd305e08 inherit pub_static_methods_class_acts_1_1_i_navigation_policy" id="r_ad6925e631f0576db80fb178edd305e08"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_acts_1_1_i_navigation_policy.html#ad6925e631f0576db80fb178edd305e08">noopInitializeCandidates</a> (const <a class="el" href="class_acts_1_1_geometry_context.html">GeometryContext</a> &amp;, const <a class="el" href="struct_acts_1_1_navigation_arguments.html">NavigationArguments</a> &amp;, const <a class="el" href="class_acts_1_1_append_only_navigation_stream.html">AppendOnlyNavigationStream</a> &amp;, const <a class="el" href="class_acts_1_1_logger.html">Logger</a> &amp;)</td></tr>
<tr class="memdesc:ad6925e631f0576db80fb178edd305e08 inherit pub_static_methods_class_acts_1_1_i_navigation_policy"><td class="mdescLeft">&#160;</td><td class="mdescRight">Noop update function that is suitable as a default for default navigation delegates.  <br /></td></tr>
<tr class="inherit_header pro_methods_class_acts_1_1_i_navigation_policy"><td colspan="2" onclick="javascript:dynsection.toggleInherit('pro_methods_class_acts_1_1_i_navigation_policy')"><span class="dynarrow"><span class="arrowhead closed"></span></span>Protected Member Functions inherited from <a class="el" href="class_acts_1_1_i_navigation_policy.html">Acts::INavigationPolicy</a></td></tr>
<tr class="memitem:a6a2bef72c7ff7f6176debf91c3eaa781 inherit pro_methods_class_acts_1_1_i_navigation_policy" id="r_a6a2bef72c7ff7f6176debf91c3eaa781"><td class="memTemplParams" colspan="2">template&lt;NavigationPolicyConcept T&gt; </td></tr>
<tr class="memitem:a6a2bef72c7ff7f6176debf91c3eaa781 inherit pro_methods_class_acts_1_1_i_navigation_policy template"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_acts_1_1_i_navigation_policy.html#a6a2bef72c7ff7f6176debf91c3eaa781">connectDefault</a> (<a class="el" href="namespace_acts.html#a3c7053506015dae00ae1b4273764fb86">NavigationDelegate</a> &amp;delegate) const</td></tr>
<tr class="memdesc:a6a2bef72c7ff7f6176debf91c3eaa781 inherit pro_methods_class_acts_1_1_i_navigation_policy"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal helper function for derived classes that conform to the concept and have a conventional <span class="tt">updateState</span> method.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Optimized navigation policy for cylindrical volumes that intelligently selects which portals to add as candidates based on geometric analysis. </p>
<p>This policy performs geometric calculations to determine which cylinder faces (inner/outer cylinder, positive/negative discs) are reachable from the current position and direction, avoiding unnecessary intersection calculations with unreachable portals.</p>
<p>Algorithm overview:</p><ol type="1">
<li>Transform position/direction to volume-local coordinates</li>
<li>Check disc intersection: If not parallel to z-axis, calculate intersection with appropriate disc (positive/negative based on direction) and verify if intersection point lies within the annular disc bounds</li>
<li>Check inner cylinder intersection: Find point of closest approach to the z-axis in the xy-plane. If this point is closer than inner radius and lies within the forward ray direction, add inner cylinder as candidate</li>
<li>Optimization: If both inner cylinder and disc are hit, compare their 3D distances along the ray. If the inner cylinder is closer, discard the disc candidate as it will be blocked and never reached</li>
<li>Default fallback: If neither disc nor inner cylinder are hit, add outer cylinder as the target (particle will exit through outer boundary)</li>
</ol>
<p>Constraints:</p><ul>
<li>Only works with cylindrical volumes having non-zero inner radius</li>
<li>Requires exactly 4 portals (inner cylinder, outer cylinder, Â±z discs)</li>
<li>Does not handle contained sub-volumes</li>
</ul>
<p>Performance benefits:</p><ul>
<li>Reduces intersection calculations by ~2-3x compared to trying all portals</li>
<li>Eliminates false positive intersections that would be filtered later </li>
</ul>
</div><a name="doc-constructors" id="doc-constructors"></a><h2 id="header-doc-constructors" class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a7b73eff8aac730549ddc2cc25a0c0c82" name="a7b73eff8aac730549ddc2cc25a0c0c82"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b73eff8aac730549ddc2cc25a0c0c82">&#9670;&#160;</a></span>CylinderNavigationPolicy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Acts::CylinderNavigationPolicy::CylinderNavigationPolicy </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_acts_1_1_geometry_context.html">GeometryContext</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>gctx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_acts_1_1_tracking_volume.html">TrackingVolume</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>volume</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_acts_1_1_logger.html">Logger</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>logger</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor from a volume. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gctx</td><td>is the geometry context </td></tr>
    <tr><td class="paramname">volume</td><td>is the volume to navigate </td></tr>
    <tr><td class="paramname">logger</td><td>is the logger </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Member Function Documentation</h2>
<a id="ad8265669622a577a9dd6b84c2559b0d9" name="ad8265669622a577a9dd6b84c2559b0d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8265669622a577a9dd6b84c2559b0d9">&#9670;&#160;</a></span>connect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Acts::CylinderNavigationPolicy::connect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_acts.html#a3c7053506015dae00ae1b4273764fb86">NavigationDelegate</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>delegate</em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel override">override</span><span class="mlabel virtual">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Connect the policy to a navigation delegate. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">delegate</td><td>is the navigation delegate </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="class_acts_1_1_i_navigation_policy.html#ad2694fb8b77a560d184a6a9670d65300">Acts::INavigationPolicy</a>.</p>

</div>
</div>
<a id="a4e7849281f8e4aecded40f5746353dd8" name="a4e7849281f8e4aecded40f5746353dd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e7849281f8e4aecded40f5746353dd8">&#9670;&#160;</a></span>initializeCandidates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Acts::CylinderNavigationPolicy::initializeCandidates </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="class_acts_1_1_geometry_context.html">GeometryContext</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>gctx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_acts_1_1_navigation_arguments.html">NavigationArguments</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>args</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_acts_1_1_append_only_navigation_stream.html">AppendOnlyNavigationStream</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>stream</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="class_acts_1_1_logger.html">Logger</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>logger</em></span>&#160;) const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Intelligently select and add portal candidates based on geometric analysis. </p>
<p>The algorithm determines which portals are geometrically reachable:</p><ul>
<li>Disc portals: Added if ray intersects the annular disc area</li>
<li>Inner cylinder: Added if ray's closest approach to z-axis is within inner radius</li>
<li>Outer cylinder: Added as fallback when no other portals are reachable</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">gctx</td><td>is the geometry context </td></tr>
    <tr><td class="paramname">args</td><td>are the navigation arguments containing position and direction </td></tr>
    <tr><td class="paramname">stream</td><td>is the navigation stream to update with selected candidates </td></tr>
    <tr><td class="paramname">logger</td><td>is the logger for debugging output </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="namespace_acts.html">Acts</a></li><li class="navelem"><a href="class_acts_1_1_cylinder_navigation_policy.html">CylinderNavigationPolicy</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
