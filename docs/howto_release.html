<!-- HTML header for doxygen 1.12.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ACTS: How to make a release</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script>
MathJax = {
  tex: {
    inlineMath: {'[+]': [['$', '$']]}
  },
};
</script>
<script id="MathJax-script" async src="tex-mml-chtml.js"></script>
<!-- <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
 -->
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
</script>
<!-- ACTS Version Manager -->
<link href="acts-version-manager.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="acts-version-manager.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="acts_logo_colored.svg"/></td>
  <td id="projectalign">
   <div id="projectname">ACTS
   </div>
   <div id="projectbrief">Experiment-independent tracking</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('howto_release.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">How to make a release </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Instructions on how to make a new ACTS release.</p>
<p>We use <a href="https://www.conventionalcommits.org/en/v1.0.0/#summary">conventional commits</a> for all of our PRs. We use the common prefixes: <span class="tt">fix:</span>, <span class="tt">feat:</span>, <span class="tt">build:</span>, <span class="tt">chore:</span>, <span class="tt">ci:</span>, <span class="tt">docs:</span>, <span class="tt">style:</span>, <span class="tt">refactor:</span>, <span class="tt">perf:</span>, <span class="tt">test:</span>.</p>
<p>The next version number for a release is automatically determined from the PRs (commits) that have been merged since the last release, following semantic versioning. On top of that, release notes are automatically generated from the PR titles, using the prefixes as groups.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md50"></a>
Step 1: Update the release branch</h2>
<dl class="section note"><dt>Note</dt><dd>This assumes you have a local clone of the ACTS repository at hand. You'll also need write permissions on the upstream ACTS repository to be able to push to the <span class="tt">releases</span> branch.</dd></dl>
<div class="fragment"><div class="line">git checkout releases</div>
<div class="line">git fetch upstream # make sure you&#39;re up to date</div>
<div class="line">git merge --no-ff upstream/main</div>
</div><!-- fragment --><p>At this point, your commit graph should look something like this:</p>
<div class="fragment"><div class="line">de4bffa 2022-06-23 11:02 +0200 Paul Gessinger             M─┐ [releases] Merge remote-tracking branch &#39;origin/main&#39; into releases</div>
<div class="line">75f0835 2022-06-22 19:27 +0200 Andreas Stefl              │ o fix: SimulationActor produces negative MaterialSlab thickness (#1288)</div>
<div class="line">c586094 2022-06-22 18:41 +0200 Andreas Stefl              │ o refactor: python examples vertex_fitting.py (#1286)</div>
<div class="line">e6e7949 2022-06-22 10:31 +0200 Paul Gessinger             │ o ci: Bump ccache max size to 500MB (#1285)</div>
<div class="line">bf8cb1c 2022-06-21 11:26 -0400 Joe Osborn                 │ o {fork/main} refactor: Move propagator options to general fitter options (#1282)</div>
<div class="line">7bf3981 2022-06-20 20:16 +0100 Scott Hurley               │ o feat: Add Profiling Support with gperftools (#1274)</div>
<div class="line">4a21df3 2022-06-14 18:32 +0200 Paul Gessinger             │ o fix: Add another compat fix for clang+libstdc++ (#1269)</div>
<div class="line">93c608d 2022-06-14 16:35 +0200 Paul Gessinger             │ o ci: Retry nodeps build if it fails the first time (#1283)</div>
<div class="line">9920a81 2022-06-14 14:53 +0200 Paul Gessinger             │ o ci: Reduce ccache limit to 150MB (#1270)</div>
<div class="line">baa4222 2022-06-14 10:16 +0200 Benjamin Huth              │ o fix: Add missing dependency in Exa.TrkX plugin (#1276)</div>
<div class="line">adf079e 2022-06-08 12:47 +0000 github-actions[bot]        o │ &lt;v19.2.0&gt; Bump to version v19.2.0</div>
<div class="line">4ee53fd 2022-06-08 14:46 +0200 Paul Gessinger             M─│─┐ Merge branch main into releases</div>
<div class="line">f9a0979 2022-06-08 09:35 +0200 Noemi Calace               │ o─┘ feat: Allow passing seed quality to seeds (#1268)</div>
<div class="line">8a2260b 2022-06-07 16:31 +0200 Alexander J. Pfleger       │ o feat: RKN-monitoring to AtlasStepper, change type int-&gt;size_t (#1264)</div>
<div class="line">bd55ecb 2022-06-07 15:25 +0200 Noemi Calace               │ o feat: configurable phi values in grid construction (#1275)</div>
<div class="line">29f3649 2022-06-07 14:22 +0200 Noemi Calace               │ o fix: Fixing typo in name of variable and associated methods (#1277)</div>
<div class="line">239ece3 2022-06-03 17:39 +0200 robertlangenberg           │ o  bump macos dependencies (#1279)</div>
<div class="line">f77f377 2022-05-30 15:46 +0200 Noemi Calace               │ o feat: Adding features for sorting space points in r in (phi, z) grid (#1267)</div>
<div class="line">a7ee09d 2022-05-25 11:17 +0200 Luis Falda Coelho          │ o fix: Bug in xyz strip coordinates transformation  (#1265)</div>
<div class="line">82f42a2 2022-05-25 09:02 +0000 github-actions[bot]        o │ &lt;v19.1.0&gt; Bump to version v19.1.0</div>
<div class="line">7c59e12 2022-05-25 10:26 +0200 Paul Gessinger             M─│─┐ Merge remote-tracking branch &#39;origin/main&#39; into releases</div>
<div class="line">4ceddf3 2022-05-25 10:26 +0200 Luis Falda Coelho          │ o─┘ feat: ITk seedFilter integration and seed quality confirmation  (#1201)</div>
</div><!-- fragment --><p>You can now push the updated <span class="tt">releases</span> branch to the remote <span class="tt">releases</span> branch using <span class="tt">git push -u upstream releases</span>.</p>
<p>On push, a CI job should run and create an additional commit on the <span class="tt">releases</span> branch, which bumps a number of version numbers. That commit is going to be the one tagged with the correct version. It doesn't hurt to make sure that commit looks right, as in it bumps to a sensible next version number.</p>
<h2 class="doxsection"><a class="anchor" id="autotoc_md51"></a>
Step 2: Prepare milestone</h2>
<p>By convention, we assign all open PRs and issues to the <span class="tt">next</span> milestone. When a new release is cut, all closed issues and PRs are moved over to a dedicated milestone named after the next version number. To do this, go to the <em>Pull Requests</em> view on the main repository, and click <em>Milestones</em>:</p>
<div class="image">
<img src="milestones.png" alt="" width="300px"/>
<div class="caption">
The milestones button</div></div>
    <p>First, create a new milestone here. Name it <span class="tt">vX.Y.Z</span>, corresponding to the next version (you can check the release CI job mentioned above to determine this. The job will also create an unreleased GitHub <em>release</em> which should have the right name).</p>
<p>Next, go back to the list of milestones and go to the <span class="tt">next</span> milestone, and click on <em>closed</em> to get to a list of all closed PRs and issues assigned to it:</p>
<div class="image">
<img src="next_milestone.png" alt=""/>
<div class="caption">
The next milestone, which has a "closed" button</div></div>
    <p>You'll be taken to a list view which shows all closed PRs and issues assigned to the <span class="tt">next</span> milestone. On the top left there should be a checkbox allowing you to select all visible items:</p>
<div class="image">
<img src="select_all_closed.png" alt="" width="300px"/>
<div class="caption">
Checkbox to select all visible PRs and issues.</div></div>
    <dl class="section note"><dt>Note</dt><dd>The checkbox will only select the items on the visible page. If there are many items, it's possible you'll have to redo this step until it has been applied to all items.</dd></dl>
<p>Towards the right there's a button called <em>Milestone</em> which allows you to select a milestone to assign. Assign all closed items to the new milestone you created above.</p>
<div class="image">
<img src="milestone_drop.png" alt="" width="300px"/>
<div class="caption">
Dropdown to assign the selected items to a new milestone</div></div>
    <h2 class="doxsection"><a class="anchor" id="autotoc_md52"></a>
Step 3: Publish release</h2>
<p>The release CI job should have created a draft release visible in the GitHub interface. If you navigate to the list of all releases, there should be an entry for this new release. You should</p>
<ol type="1">
<li>Inspect the auto-generated release note, and see if there are any obvious mistakes here that the job might have made.</li>
<li>Check that the target commit hash, that the release will generate a tag for once published, actually corresponds to the commit on the <span class="tt">releases</span> branch that the CI job from before created.</li>
<li>Click the <em>Publish</em> button to create the release. </li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
